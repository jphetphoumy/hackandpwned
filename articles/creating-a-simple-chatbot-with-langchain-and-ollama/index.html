<!DOCTYPE html><html><head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Creating a simple chatbot with Langchain and Ollama</title>
<meta content="no-cache" http-equiv="cache-control">
<meta content="0" http-equiv="expires">
<meta content="no-cache" http-equiv="pragma">
<meta property="og:title" content="Creating a simple chatbot with Langchain and Ollama">
<link rel="preload" as="fetch" crossorigin="anonymous" href="/articles/creating-a-simple-chatbot-with-langchain-and-ollama/_payload.json?c645a0ea-9e8c-4a09-bf95-9db1921678a4">
<style>body,html{background-color:#000;background-size:100% 2px,3px 100%;color:#fff;font-family:Courier New,monospace;height:100%;margin:0}a{color:#ccc;text-decoration:none}a:hover{border-bottom:1px solid #fff;color:#fff}header{background-color:#000;padding:10px 20px;text-align:center}nav ul{list-style-type:none;padding:0}nav ul li{display:inline;margin-right:10px}@media (max-width:850px){nav ul{align-items:center;display:flex;flex-direction:column}nav ul li{display:block;margin:5px 0}}main{margin:20px auto;max-width:850px}@media (max-width:850px){main{margin:1.5em}}article{border-bottom:1px solid #fff;margin:20px 0;padding:10px}article h1:before{content:".| "}article h1:after{content:" |."}article h3:before{content:"> "}article h2:before{content:"// "}article h4:before{content:">> "}h1{font-size:1.5em}h2{font-size:1.25em}footer{background-color:#000;box-sizing:border-box;color:#fff;padding:10px 20px;text-align:center;width:100%}@keyframes blink{50%{border-color:transparent}}input[type=text]{animation:blink 1s step-end infinite;background:none;border:none;border-bottom:2px solid #fff;color:#fff;font-family:Courier New,monospace;font-size:1em}:not(pre)>code{color:#0bf40f}</style>
<style>.current-link[data-v-66d5747f]{border-bottom:1px solid #fff}nav ul[data-v-66d5747f]{list-style-type:none;padding:0}li[data-v-66d5747f]{position:relative}.dropdown[data-v-66d5747f]{background-color:#f9f9f9;box-shadow:0 8px 16px rgba(0,0,0,.2);display:none;left:0;min-width:100%;position:absolute;top:100%;z-index:1}.dropdown li[data-v-66d5747f]{float:none}.dropdown li a[data-v-66d5747f]{color:#000;display:block;padding:12px 16px;text-align:left;text-decoration:none}.dropdown li a[data-v-66d5747f]:hover{border:none;text-decoration:underline}li:hover>.dropdown[data-v-66d5747f]{display:block}</style>
<style>pre code .line{display:block;min-height:1rem}</style>
<style>.container[data-v-5d50afd2]{background:#1e1e1e;border-radius:.5rem;margin-bottom:1rem;margin-top:1rem;overflow:auto;position:relative}.container[data-v-5d50afd2]::-webkit-scrollbar{width:8px}.container[data-v-5d50afd2]::-webkit-scrollbar-track{background:#2e2e2e;border-radius:10px}.container[data-v-5d50afd2]::-webkit-scrollbar-thumb{background-color:#555;border:2px solid #1e1e1e;border-radius:10px}.container[data-v-5d50afd2]::-webkit-scrollbar-thumb:hover{background:#666}.container[data-v-5d50afd2]{scrollbar-color:#555 #2e2e2e;scrollbar-width:thin}.filename-text[data-v-5d50afd2]{color:#fff;font-size:14px;left:1em;position:absolute;top:.5em}.copy-container[data-v-5d50afd2]{background:#343434;display:flex;justify-content:space-between;padding:.3em .3em .3em 10px}.copy-button[data-v-5d50afd2]{display:flex}.copy-container button[data-v-5d50afd2]{background:none;border:none;color:inherit;cursor:pointer}[data-v-5d50afd2] pre{padding-left:1em;padding-right:1em}</style>
<link rel="stylesheet" href="/_nuxt/entry.FwIe4B3A.css">
<link rel="stylesheet" href="/_nuxt/default.C93MXoqL.css">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/Cu--AhPT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CEuvrO2w.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DhrSCCMP.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DzzeNtMX.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/yFUpTe6U.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/ay9QD7tP.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C-v3KzvZ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/J7aKT1ic.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/6Y_ArhOu.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DCJY93eg.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/z6R0bBQT.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C8HJrbvK.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/J6GHZOpV.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CWnd7ttA.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/muVZa6rA.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/DWsDgECh.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CYX0_W5B.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/D1vmVxV6.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/mlcIA1Uc.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/_3YLP6K2.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/CLh5fKJE.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/fUn9VHEO.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/U5tM73-Y.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B6vEXkCG.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/B0exj0TQ.js">
<link rel="modulepreload" as="script" crossorigin href="/_nuxt/C0-S5ffF.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/BPNuYOrP.js">
<link rel="prefetch" as="script" crossorigin href="/_nuxt/CRQggBXf.js">
<script type="module" src="/_nuxt/Cu--AhPT.js" crossorigin></script></head><body><div id="__nuxt"><div><!--[--><title>.: Hackandpwned :.</title><!----><!----><!----><!--]--><!--[--><header data-v-66d5747f><h1 data-v-66d5747f>.: Hackandpwned :.</h1><h2 data-v-66d5747f>DevOps &amp; Hacking Insights</h2><nav data-v-66d5747f><ul data-v-66d5747f><!--[--><li data-v-66d5747f><a class="" href="/" data-v-66d5747f>Home</a><!----></li><li data-v-66d5747f><a class="current-link" href="/articles" data-v-66d5747f>Articles</a><!----></li><li data-v-66d5747f><a class="" href="/contact" data-v-66d5747f>Contact</a><!----></li><!--]--></ul></nav></header><main><!--[--><section class="articles"><article><!--[--><!--[--><div><h1 id="creating-a-simple-chatbot-with-langchain-and-ollama"><!--[-->Creating a simple chatbot with Langchain and Ollama<!--]--></h1><hr><!--[--><p>date: 06-05-2024</p><!----><!--]--><hr><h2 id="what-is-retrieval-augmented-generation-rag"><a href="#what-is-retrieval-augmented-generation-rag"><!--[-->What is Retrieval-Augmented Generation (RAG) ?<!--]--></a></h2><p><!--[-->Retrieval-Augmented Generation, or RAG, is this super cool tech that supercharges large language models (LLMs) like the ones we use in AI chatbots and search engines. Basically, it makes AI responses smarter by pulling in fresh, relevant info from external sources right when you need it.<!--]--></p><h3 id="why-rag-rocks-for-llms"><a href="#why-rag-rocks-for-llms"><!--[-->Why RAG Rocks for LLMS !<!--]--></a></h3><p><!--[-->Here&#39;s why you might want to consider using RAG if you&#39;re messing around with AI models:<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Keeps Things Fresh:<!--]--></strong> RAG enables LLMs to pull in the latest data beyond their training datasets, diminishing the likelihood of delivering outdated or inaccurate responses.<!--]--></li><li><!--[--><strong><!--[-->Keeps it Real:<!--]--></strong> Instead of making up answers (yeah, AI does that sometimes), RAG helps keep the AI’s responses grounded in actual, factual data.<!--]--></li><li><!--[--><strong><!--[-->Easy to Implement:<!--]--></strong> You don&#39;t need to be a coding wizard to get RAG rolling, and it doesn&#39;t cost an arm and a leg to update your AI model.<!--]--></li><!--]--></ol><p><!--[-->In short, RAG is like giving your AI a mini-upgrade with each query, ensuring it&#39;s always on its A-game when answering questions or helping out users. It&#39;s a game-changer for making AI interactions a lot more reliable and useful.<!--]--></p><h2 id="installation-of-the-tools-ollama-langchain-and-gradio"><a href="#installation-of-the-tools-ollama-langchain-and-gradio"><!--[-->Installation of the tools: Ollama, Langchain and Gradio<!--]--></a></h2><h3 id="creating-the-python-project"><a href="#creating-the-python-project"><!--[-->Creating the python project<!--]--></a></h3><p><!--[-->First, we will use <code class=""><!--[-->poetry<!--]--></code> to create our python project.<!--]--></p><p><!--[-->Use the following command to initialize your project:<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">poetry</span><span style="--shiki-default:#A6E3A1"> new</span><span style="--shiki-default:#A6E3A1"> ai-chatbot-rag
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->Next, let&#39;s understand the tools we will use for our application. Let&#39;s start by Ollama !<!--]--></p><h3 id="ollama"><a href="#ollama"><!--[-->Ollama<!--]--></a></h3><p><!--[-->Ollama is the easiest solution to run LLM locally. It&#39;s as simple as running <code class=""><!--[-->docker pull<!--]--></code>. To get started with Ollama, you can download it on the <a href="https://ollama.com/download" rel="nofollow"><!--[-->official website<!--]--></a><!--]--></p><p><!--[-->To use a local LLM with ollama, simply use <code class=""><!--[-->ollama pull &lt;model-name&gt;<!--]--></code>. If we want to use the new <strong><!--[-->LLAMA 3<!--]--></strong> model, we can run the following command :<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">ollama</span><span style="--shiki-default:#A6E3A1"> pull</span><span style="--shiki-default:#A6E3A1"> llama3
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->When the model download is complete, you can use the model with the following command:<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">ollama</span><span style="--shiki-default:#A6E3A1"> run</span><span style="--shiki-default:#A6E3A1"> llama3
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->You can also serve an api endpoint and this is what we will use for our chatbot !.<!--]--></p><p><!--[-->To do this, run the following command:<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">ollama</span><span style="--shiki-default:#A6E3A1"> serve
</span></span></code><!--]--></pre><!--]--></div><h3 id="langchain"><a href="#langchain"><!--[-->Langchain<!--]--></a></h3><p><!--[-->To supercharge our AI app and make things easier, we will use the <strong><!--[-->Langchain<!--]--></strong> framework.<!--]--></p><p><!--[-->This framework have some nice abstraction that will make it easier to create our RAG application.<!--]--></p><h4 id="getting-started-with-langchain"><a href="#getting-started-with-langchain"><!--[-->Getting Started with Langchain<!--]--></a></h4><p><!--[-->Here&#39;s the quick guide on how to getting Langchain up and running.<!--]--></p><ol><!--[--><li><!--[--><strong><!--[-->Installation:<!--]--></strong> Since we already have our project initialized, let&#39;s add the Langchain Library ! In your python project, use the following command:<!--]--></li><!--]--></ol><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">poetry</span><span style="--shiki-default:#A6E3A1"> add</span><span style="--shiki-default:#A6E3A1"> langchain
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->This command will add the Langchain library inside your project.<!--]--></p><h4 id="simple-chatbot-using-langchain-ollama"><a href="#simple-chatbot-using-langchain-ollama"><!--[-->Simple Chatbot using Langchain &amp; Ollama<!--]--></a></h4><p><!--[-->Let&#39;s create a simple Chatbot<!--]--></p><p><!--[-->First, we need to import the what we need from Langchain<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>python</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-python shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#CBA6F7">from</span><span style="--shiki-default:#CDD6F4"> langchain_community</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#CDD6F4">llms </span><span style="--shiki-default:#CBA6F7">import</span><span style="--shiki-default:#CDD6F4"> Ollama
</span></span><span class="line" line="2"><span style="--shiki-default:#CBA6F7">from</span><span style="--shiki-default:#CDD6F4"> langchain_core</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#CDD6F4">prompts </span><span style="--shiki-default:#CBA6F7">import</span><span style="--shiki-default:#CDD6F4"> PromptTemplate
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->We will use environment variable to make our application more flexible. Let&#39;s install python-dotenv<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#89B4FA;--shiki-default-font-style:italic">poetry</span><span style="--shiki-default:#A6E3A1"> add</span><span style="--shiki-default:#A6E3A1"> python-dotenv
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->Create a .env and add your local ip<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>bash</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-bash shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#CDD6F4">OLLAMA_BASE_URL</span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#A6E3A1">&quot;http://&lt;local-ip&gt;:11434&quot;
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->We can use the environment variable with the following code :<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>python</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-python shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span style="--shiki-default:#CBA6F7">import</span><span style="--shiki-default:#CDD6F4"> os
</span></span><span class="line" line="2"><span style="--shiki-default:#CBA6F7">from</span><span style="--shiki-default:#CDD6F4"> dotenv </span><span style="--shiki-default:#CBA6F7">import</span><span style="--shiki-default:#CDD6F4"> load_dotenv
</span></span><span class="line" line="3"><span style="--shiki-default:#89B4FA">load_dotenv</span><span style="--shiki-default:#9399B2">()
</span></span><span class="line" line="4"><span emptylineplaceholder="true">
</span></span><span class="line" line="5"><span style="--shiki-default:#6C7086;--shiki-default-font-style:italic"># Define the base url for ollama
</span></span><span class="line" line="6"><span style="--shiki-default:#CDD6F4">OLLAMA_BASE_URL </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#CDD6F4"> os</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#89B4FA">getenv</span><span style="--shiki-default:#9399B2">(</span><span style="--shiki-default:#A6E3A1">&quot;OLLAMA_BASE_URL&quot;</span><span style="--shiki-default:#9399B2">)
</span></span></code><!--]--></pre><!--]--></div><p><!--[-->Now let&#39;s create the LLM.<!--]--></p><div class="container" meta data-v-5d50afd2><div class="copy-container" data-v-5d50afd2><span class="language-text" data-v-5d50afd2>python</span><!----><div class="copy-button" data-v-5d50afd2><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" height="15px" data-v-5d50afd2><path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184" data-v-5d50afd2></path></svg><button class="copy-button" data-v-5d50afd2>Copy</button></div></div><!--[--><pre class="language-python shiki shiki-themes catppuccin-mocha" style=""><!--[--><code><span class="line" line="1"><span emptylineplaceholder="true">
</span></span><span class="line" line="2"><span style="--shiki-default:#CDD6F4">llm </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#89B4FA"> Ollama</span><span style="--shiki-default:#9399B2">(</span><span style="--shiki-default:#EBA0AC;--shiki-default-font-style:italic">model</span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#A6E3A1">&quot;phi3&quot;</span><span style="--shiki-default:#9399B2">,</span><span style="--shiki-default:#EBA0AC;--shiki-default-font-style:italic"> base_url</span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#CDD6F4">OLLAMA_BASE_URL</span><span style="--shiki-default:#9399B2">)
</span></span><span class="line" line="3"><span emptylineplaceholder="true">
</span></span><span class="line" line="4"><span style="--shiki-default:#6C7086;--shiki-default-font-style:italic"># Create the prompt template
</span></span><span class="line" line="5"><span style="--shiki-default:#CDD6F4">prompt_template </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#A6E3A1"> &quot;&quot;&quot;&lt;|system|You are an helpful Assistant. Your goal is to answer the user as best as you can&lt;|end|&gt;
</span></span><span class="line" line="6"><span style="--shiki-default:#A6E3A1">&lt;|user|&gt;What is the capital of france?&lt;|end|&gt;&lt;|assistant|&gt;
</span></span><span class="line" line="7"><span style="--shiki-default:#A6E3A1">The capital of France is Paris&lt;|end|&gt;
</span></span><span class="line" line="8"><span style="--shiki-default:#A6E3A1">&lt;|user|&gt;</span><span style="--shiki-default:#F5C2E7">{question}</span><span style="--shiki-default:#A6E3A1">&lt;|end|&gt;&lt;|assistant|&gt;
</span></span><span class="line" line="9"><span style="--shiki-default:#A6E3A1">&quot;&quot;&quot;
</span></span><span class="line" line="10"><span emptylineplaceholder="true">
</span></span><span class="line" line="11"><span style="--shiki-default:#CDD6F4">prompt </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#CDD6F4"> PromptTemplate</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#89B4FA">from_template</span><span style="--shiki-default:#9399B2">(</span><span style="--shiki-default:#CDD6F4">prompt_template</span><span style="--shiki-default:#9399B2">)
</span></span><span class="line" line="12"><span style="--shiki-default:#CDD6F4">chain </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#CDD6F4"> prompt </span><span style="--shiki-default:#94E2D5">|</span><span style="--shiki-default:#CDD6F4"> llm
</span></span><span class="line" line="13"><span emptylineplaceholder="true">
</span></span><span class="line" line="14"><span emptylineplaceholder="true">
</span></span><span class="line" line="15"><span style="--shiki-default:#CDD6F4">chunks </span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#9399B2"> []
</span></span><span class="line" line="16"><span style="--shiki-default:#CBA6F7">for</span><span style="--shiki-default:#CDD6F4"> chunk </span><span style="--shiki-default:#CBA6F7">in</span><span style="--shiki-default:#CDD6F4"> chain</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#89B4FA">stream</span><span style="--shiki-default:#9399B2">({</span><span style="--shiki-default:#CDD6F4">question</span><span style="--shiki-default:#9399B2">:</span><span style="--shiki-default:#A6E3A1"> &quot;What is the color of the sky&quot;</span><span style="--shiki-default:#9399B2">}):
</span></span><span class="line" line="17"><span style="--shiki-default:#FAB387;--shiki-default-font-style:italic">    print</span><span style="--shiki-default:#9399B2">(</span><span style="--shiki-default:#CDD6F4">chunk</span><span style="--shiki-default:#9399B2">,</span><span style="--shiki-default:#EBA0AC;--shiki-default-font-style:italic"> end</span><span style="--shiki-default:#94E2D5">=</span><span style="--shiki-default:#A6E3A1">&quot;&quot;</span><span style="--shiki-default:#9399B2">)
</span></span><span class="line" line="18"><span style="--shiki-default:#CDD6F4">    chunks</span><span style="--shiki-default:#9399B2">.</span><span style="--shiki-default:#89B4FA">append</span><span style="--shiki-default:#9399B2">(</span><span style="--shiki-default:#CDD6F4">chunk</span><span style="--shiki-default:#9399B2">)
</span></span></code><!--]--></pre><!--]--></div><style>html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}</style></div><!--]--><!--]--></article></section><!--]--></main><footer><p>© 2024 Hackandpwned. All rights reserved.</p></footer><!--]--></div></div><div id="teleports"></div><script type="application/json" id="__NUXT_DATA__" data-ssr="true" data-src="/articles/creating-a-simple-chatbot-with-langchain-and-ollama/_payload.json?c645a0ea-9e8c-4a09-bf95-9db1921678a4">[{"state":1,"once":3,"_errors":5,"serverRendered":8,"path":9,"prerenderedAt":10},["Reactive",2],{},["Reactive",4],["Set"],["Reactive",6],{"content-query-tPUx4INjBS":7,"page-data":7},null,true,"/articles/creating-a-simple-chatbot-with-langchain-and-ollama",1715024210554]</script>
<script>window.__NUXT__={};window.__NUXT__.config={public:{mdc:{components:{prose:true,map:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"}},headings:{anchorLinks:{h1:false,h2:true,h3:true,h4:true,h5:false,h6:false}}},content:{locales:[],defaultLocale:"",integrity:1715024201103,experimental:{stripQueryParameters:false,advanceQuery:false,clientDB:false},respectPathCase:false,api:{baseURL:"/api/_content"},navigation:{fields:[]},tags:{p:"prose-p",a:"prose-a",blockquote:"prose-blockquote","code-inline":"prose-code-inline",code:"ProseCodeInline",em:"prose-em",h1:"prose-h1",h2:"prose-h2",h3:"prose-h3",h4:"prose-h4",h5:"prose-h5",h6:"prose-h6",hr:"prose-hr",img:"prose-img",ul:"prose-ul",ol:"prose-ol",li:"prose-li",strong:"prose-strong",table:"prose-table",thead:"prose-thead",tbody:"prose-tbody",td:"prose-td",th:"prose-th",tr:"prose-tr"},highlight:{theme:"catppuccin-mocha",langs:["python","bash"],highlighter:"shiki"},wsUrl:"",documentDriven:false,host:"",trailingSlash:false,search:"",contentHead:true,anchorLinks:{depth:4,exclude:[1]}}},app:{baseURL:"/",buildAssetsDir:"/_nuxt/",cdnURL:""}}</script></body></html>